/*! handyCAPSSLider - v0.1.0 - 2014-05-06
* Copyright (c) 2014 handyCAPS; Licensed MIT */
function HandyCAPSSlider(a){this.every=function(a,b){this.timerid=window.setInterval(b.bind(this),a)},this.hexToRgb=function(a){var b=a.replace("#",""),c=[];if(3!==b.length&&6!==b.length||/[^a-f0-9]/gi.test(b))return"rgb(255,0,0)";if(3===b.length){for(var d="",e=0;3>e;e++)d+=b[e]+b[e];return this.hexToRgb(d)}for(var f=0;6>f;f+=2){var g=parseInt(f+1,10);c.push(parseInt(b[f]+b[g],16))}var h="rgb("+c.join(",")+")";return h},this.brightness=function(a,b){var c=b,d="";/#/.test(b)&&(c=this.hexToRgb(b));for(var e=c.replace(/[^0-9,]/g,""),f=e.split(","),g=0;g<f.length;g++){var h=parseInt(f[g],10)+Math.floor(2.55*parseInt(a,10));0>h&&(h=0),h>255&&(h=255),f[g]=h}return d="rgb("+f.join(",")+")"},this.classify=function(a){return 0===a.indexOf("#")?void alert("I can't let you do that Dave. Please use classes and not id's"):0===a.indexOf(".")?a:"."+a},this.setClasses=function(a){for(var b=0;b<a.length;b++)this[a[b]]=this.classify(this[a[b]])},this.getSeconds=function(a){return/[^0-9.]/g.test(a)?/m/gi.test(a)?parseInt(a.replace(/[^0-9]/,""),10)/1e3:parseFloat(a.replace(/[^0-9]/,"")):parseFloat(a)},this.getItems=function(){return document.querySelectorAll(this.container+" "+this.item)},this.targetBullets=function(){return document.querySelectorAll(this.classify(this.bulClass))},this.countItems=function(){var a=this.getItems();return a.length},this.nameItems=function(a,b){for(var c=document.querySelectorAll(this.container+" "+a),d=0;d<c.length;d++)c[d].className+=" "+b+parseInt(d+1,10)},this.getBullets=function(){var a=this.countItems(),b="",c="<div class='"+this.bulClass+"' style='display: inline-block; border-radius: 50%; cursor: pointer; transition: 0.3s "+parseInt(this.getSeconds(this.animDur)-.3,10)+"s;";c+="margin: 0 "+parseInt(this.bulSize,10)/4+"px;",c+="width: "+this.bulSize+";",c+="height: "+this.bulSize+";",c+=" background-color: "+this.bulColor+";",c+="'></div>";for(var d=0;a>d;d++)b+=c;return b},this.placeBullets=function(){var a=document.createElement("div"),b=this.getBullets(),c=document.querySelectorAll(this.container)[0];a.className="bullet-holster";var d=a.style;d.margin=(parseInt(this.bulSize,10)/1.5).toString()+"px auto",d.textAlign="center",d.overflow="hidden",c.appendChild(a);var e=document.querySelectorAll(this.container+" .bullet-holster");e[0].innerHTML=b},this.bulletCb=function(a){var b=this.targetBullets(),c=a.currentTarget,d=parseInt(c.className.replace(/[^0-9]/g,""),10);c.style.backgroundColor=this.bulAltCol,b[this.i].style.backgroundColor=this.bulColor,this.i=d-2,this.goToSlide(),this.i++},this.listenToBullets=function(){for(var a=this.targetBullets(),b=0;b<a.length;b++)a[b].addEventListener("click",this.bulletCb.bind(this))},this.getCapHeight=function(){return void 0===this.cMHeight?"height: "+this.capHeight+";":"min-height: "+this.cMHeight+";"},this.getSlideDur=function(){return this.getSeconds(this.slideDur)+this.getSeconds(this.animDur)},this.getCSS=function(){var a=this.container+","+this.container+" * {box-sizing: border-box; -moz-box-sizing: border-box;}";return a+=this.container+"{ overflow: hidden; position: relative; white-space: nowrap; font-size: 0;",a+="width: "+this.itemWidth+";",a+="}",a+=this.container+" "+this.item+"{ position: relative; display: inline-block; width: 100%; font-size: 16px; font-size: 1rem; white-space: normal; transition: "+this.getSeconds(this.animDur)+"s "+this.sTimFunc+";",a+="}",a+=this.container+" "+this.item+" > img { width: 100%; vertical-align: middle;",a+="height: "+this.itemHeight+";",a+="}",a+=this.container+" "+this.caption+" { position: absolute; bottom: 0; padding: 0.25em 0.5em;",a+=this.getCapHeight(),a+="background-color: "+this.capColor+";",a+="color: "+this.cTxtColor+";",a+="font-size: "+this.cFontSize+";",a+="}",a+=this.container+" > div {font-size: 16px; font-size: 1rem; white-space: normal;}",a+=this.container+" p { margin: 0;}",a+=this.container+" h2,",a+=this.container+" h3 {margin: 0 0 0.5em;}"},this.placeHeadStyles=function(){var a=document.head||document.getElementsByTagName("head")[0],b=document.createTextNode(this.getCSS()),c=document.createElement("style");c.appendChild(b),a.appendChild(c)},this.getTransformString=function(a){var b=360*parseInt(a,10),c="translateX(-"+a+"00%)";switch(this.animType){case"normal":return c;case"spin":return c+=" rotateY(-"+b+"deg)";case"flip":return c+=" rotateX(-"+b+"deg)";case"twirl":return c+=" skewX(-"+b+"deg)";default:return c}},this.goToSlide=function(){for(var a=this.i+1,b=this.getItems(),c=0;c<b.length;c++)b[c].style.transform=this.getTransformString(a),b[c].style.webkitTransform=this.getTransformString(a)},this.moveSlides=function(){var a=this.countItems(),b=this.getItems(),c=this.targetBullets();if(this.bullets&&(c[this.i].style.backgroundColor=this.bulColor),this.i>=a-1){this.i=0;for(var d=0;a>d;d++)b[d].style.transform=this.getTransformString(0),b[d].style.webkitTransform=this.getTransformString(0);return void(this.bullets&&(c[0].style.backgroundColor=this.bulAltCol))}this.bullets&&(c[this.i+1].style.backgroundColor=this.bulAltCol),this.goToSlide(),this.i++},this.pauseCb=function(){window.clearInterval(this.timerid)},this.resumeCb=function(){this.every(1e3*this.getSlideDur(),this.moveSlides)},this.pauseOnHover=function(){for(var a=this.getItems(),b=this.countItems(),c=0;b>c;c++)a[c].addEventListener("mouseenter",this.pauseCb.bind(this)),a[c].addEventListener("mouseleave",this.resumeCb.bind(this))},this.init=function(b){var c=b||{};if(this.container=c.container||a||"slider-container",this.item=c.item||"slider-item",this.caption=c.caption||"slider-caption",this.setClasses(["container","item","caption"]),this.pauseHover=void 0===c.pauseOnHover||c.pauseOnHover===!0?!0:!1,this.animDur=c.animationDur||2,this.slideDur=c.slideDur||7,this.sTimFunc=c.timingFunc||"cubic-bezier(0.75,0,0.3,1)",this.animType=c.animType||"normal",this.nameItems(this.item,"slide"),this.itemWidth=c.itemWidth||"100%",this.itemHeight=c.itemHeight||"auto",this.capHeight=c.captionHeight||"33.333%",this.cMHeight=c.capMinHeight,this.capColor=c.captionColor||"rgba(0,0,0,0.4)",this.cTxtColor=c.capTextColor||"#FFF",this.cFontSize=c.capFontSize||"16px",this.bullets=void 0===c.bullets||c.bullets===!0?!0:!1,this.bulSize=c.bulletSize||"16px",this.bulColor=c.bulletColor||"#7f8c8d",this.bulClass=c.bulletClass||"bullet",this.bulBright=c.bulletBright||-30,this.bulAltCol=c.bulAltColor||this.brightness(this.bulBright,this.bulColor),this.placeHeadStyles(),this.i=0,this.bullets){this.placeBullets(),this.nameItems(this.classify(this.bulClass),"bullet");var d=this.targetBullets();d[this.i].style.backgroundColor=this.bulAltCol,this.listenToBullets()}this.pauseHover&&this.pauseOnHover(),this.every(1e3*this.getSlideDur(),this.moveSlides)}}var handyCAPSSlider=new HandyCAPSSlider;
